<div class="gorillascode-content gorillascode-content-no-background">
  <div ng-show="!planListCtrl.loading && !planListCtrl.plans.result.length">
    <div class="gorillascode-no-results">
      <p class="md-title">Nenhum plano</p>
    </div>
  </div>

  <div ng-show="planListCtrl.plans.result.length" layout="column" layout-gt-xs="row" class="plans">
    <md-card ng-repeat="plan in planListCtrl.plans.result track by plan.id" flex class="plan"
             ng-class="{ current: protectedCtrl.user.subscription.plan_id == plan.id && protectedCtrl.user.subscription.status != 'CANCELED' }">
      <md-card-title>
        <md-card-title-text layout="column" layout-align="center center">
          <div class="name">{{plan.name}}</div>

          <div ng-show="plan.price" class="price">
            R$ <span class="value">{{plan.price | currency:''}}</span>/mÃªs
          </div>
        </md-card-title-text>
      </md-card-title>

      <md-card-content>
        <md-list>
          <md-list-item>
            <md-icon md-font-icon="material-icons" aria-label="Imagens">photo_library</md-icon>
            <p>
              <strong>{{plan.max_images | number}} imagens</strong>
            </p>
          </md-list-item>

          <md-list-item>
            <md-icon md-font-icon="material-icons" aria-label="Editor de templates">description
            </md-icon>
            <p>Editor de templates</p>
          </md-list-item>

          <md-list-item>
            <md-icon md-font-icon="material-icons" aria-label="Editor HTML">code</md-icon>
            <p>Editor HTML</p>
          </md-list-item>

          <md-list-item>
            <md-icon md-font-icon="material-icons" aria-label="Categorias do MercadoLivre">list
            </md-icon>
            <p>Categorias do MercadoLivre</p>
          </md-list-item>

          <md-divider
              ng-show="protectedCtrl.user.subscription.plan_id == plan.id && protectedCtrl.user.subscription.status == 'ACTIVE'"></md-divider>

          <md-list-item
              ng-show="protectedCtrl.user.subscription.plan_id == plan.id && protectedCtrl.user.subscription.status == 'ACTIVE'">
            <md-icon md-font-icon="material-icons" aria-label="Data">today</md-icon>
            <p>
              <em>
                Vence em
                {{protectedCtrl.user.subscription.end_date | toUTCDate | date:"d 'de' MMMM"}}
              </em>
            </p>
          </md-list-item>
        </md-list>

        <div
            ng-show="protectedCtrl.user.subscription.plan_id == plan.id && protectedCtrl.user.subscription.status == 'PENDING'">
          <div class="md-caption text-center">Pendente de pagamento</div>

          <div class="text-center">
            <md-button ng-click="planListCtrl.paySubscription()" class="md-raised">
              Pagar
            </md-button>
          </div>
        </div>
      </md-card-content>

      <md-card-actions layout="column" layout-align="end">
        <md-button
            ng-show="plan.price && (protectedCtrl.user.subscription.plan_id != plan.id || protectedCtrl.user.subscription.status == 'CANCELED')"
            ng-click="planListCtrl.subscribe(plan, $event)" class="md-raised md-accent">
          Assinar
        </md-button>

        <md-button
            ng-show="protectedCtrl.user.subscription.plan_id == plan.id && !protectedCtrl.user.subscription.external_id && protectedCtrl.user.subscription.status != 'CANCELED'"
            class="md-no-focus">
          Plano atual
        </md-button>

        <md-button
            ng-show="protectedCtrl.user.subscription.plan_id == plan.id && protectedCtrl.user.subscription.external_id && protectedCtrl.user.subscription.status != 'CANCELED'"
            ng-href="https://www.mercadopago.com.br/subscriptions/detail?id={{protectedCtrl.user.subscription.external_id}}"
            target="_blank">
          Plano atual
          <md-icon md-font-icon="material-icons" aria-label="Abrir em nova janela">open_in_new
          </md-icon>
        </md-button>
      </md-card-actions>
    </md-card>
  </div>
</div>